<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Eishockey – MaxLabz Games</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #121212;
      color: #fff;
    }
    header {
      background: #1f1f1f;
      padding: 10px 20px;
      text-align: center;
      color: #4CAF50;
      font-size: 24px;
    }
    nav {
      text-align: center;
      margin: 10px 0;
    }
    nav a {
      color: #4CAF50;
      text-decoration: none;
      font-weight: bold;
      margin: 0 10px;
    }
    canvas {
      display: block;
      margin: 20px auto;
      background: #000;
      border: 2px solid #4CAF50;
    }
    .score {
      text-align: center;
      font-size: 20px;
      margin-top: 10px;
    }
    .controls {
      text-align: center;
      margin-top: 15px;
    }
    .controls select, .controls button {
      background: #1f1f1f;
      color: #4CAF50;
      padding: 8px 12px;
      border: 1px solid #4CAF50;
      border-radius: 5px;
      margin: 5px;
    }
  </style>
</head>
<body>
  <header>Eishockey</header>
  <nav><a href="../../index.html">Zurück zur Startseite</a></nav>
  <div class="controls">
    <label>Modus:</label>
    <select id="mode">
      <option value="cpu">Spieler vs. Computer</option>
      <option value="pvp">Spieler vs. Spieler</option>
    </select>
    <label>Schwierigkeit:</label>
    <select id="difficulty">
      <option value="easy">Einfach</option>
      <option value="medium" selected>Mittel</option>
      <option value="hard">Schwer</option>
    </select>
    <button onclick="startGame()">Spiel starten</button>
  </div>

  <div class="score" id="score">Spieler 1: 0 | Spieler 2: 0</div>
  <canvas id="gameCanvas" width="600" height="400"></canvas>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreDisplay = document.getElementById('score');
    let mode = 'cpu';
    let difficulty = 'medium';
    let gameInterval;

    const paddleWidth = 10, paddleHeight = 70, puckSize = 10;
    let leftPaddle = { x: 20, y: 160, dy: 0 };
    let rightPaddle = { x: 570, y: 160, dy: 0 };
    let puck = { x: 295, y: 195, dx: 4, dy: 3 };

    let score1 = 0, score2 = 0;

    function resetPuck() {
      puck.x = 295;
      puck.y = 195;
      puck.dx = Math.random() < 0.5 ? -4 : 4;
      puck.dy = (Math.random() * 4 - 2);
    }

    function drawPaddle(p) {
      ctx.fillStyle = '#4CAF50';
      ctx.fillRect(p.x, p.y, paddleWidth, paddleHeight);
    }

    function drawPuck() {
      ctx.fillStyle = '#fff';
      ctx.fillRect(puck.x, puck.y, puckSize, puckSize);
    }

    function updateAI() {
      const error = difficulty === 'easy' ? 30 : difficulty === 'medium' ? 15 : 5;
      if (puck.y + puckSize / 2 > rightPaddle.y + paddleHeight / 2 + error) {
        rightPaddle.dy = 3;
      } else if (puck.y + puckSize / 2 < rightPaddle.y + paddleHeight / 2 - error) {
        rightPaddle.dy = -3;
      } else {
        rightPaddle.dy = 0;
      }
      rightPaddle.y += rightPaddle.dy;
    }

    function update() {
      leftPaddle.y += leftPaddle.dy;
      if (mode === 'cpu') updateAI();
      else rightPaddle.y += rightPaddle.dy;

      puck.x += puck.dx;
      puck.y += puck.dy;

      // Wände
      if (puck.y <= 0 || puck.y + puckSize >= canvas.height) puck.dy *= -1;

      // Kollision Paddles
      if (
        puck.x <= leftPaddle.x + paddleWidth &&
        puck.y + puckSize > leftPaddle.y &&
        puck.y < leftPaddle.y + paddleHeight
      ) {
        puck.dx *= -1;
      }

      if (
        puck.x + puckSize >= rightPaddle.x &&
        puck.y + puckSize > rightPaddle.y &&
        puck.y < rightPaddle.y + paddleHeight
      ) {
        puck.dx *= -1;
      }

      // Punkte
      if (puck.x < 0) {
        score2++;
        updateScore();
        resetPuck();
      }
      if (puck.x > canvas.width) {
        score1++;
        updateScore();
        resetPuck();
      }
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawPaddle(leftPaddle);
      drawPaddle(rightPaddle);
      drawPuck();
    }

    function loop() {
      update();
      draw();
    }

    function updateScore() {
      scoreDisplay.textContent = `Spieler 1: ${score1} | Spieler 2: ${score2}`;
    }

    function startGame() {
      clearInterval(gameInterval);
      score1 = score2 = 0;
      updateScore();
      resetPuck();
      leftPaddle.y = 160;
      rightPaddle.y = 160;
      mode = document.getElementById('mode').value;
      difficulty = document.getElementById('difficulty').value;
      gameInterval = setInterval(loop, 1000 / 60);
    }

    // Steuerung
    document.addEventListener('keydown', e => {
      if (e.key === 'w') leftPaddle.dy = -5;
      if (e.key === 's') leftPaddle.dy = 5;
      if (e.key === 'ArrowUp') rightPaddle.dy = -5;
      if (e.key === 'ArrowDown') rightPaddle.dy = 5;
    });

    document.addEventListener('keyup', e => {
      if (e.key === 'w' || e.key === 's') leftPaddle.dy = 0;
      if (e.key === 'ArrowUp' || e.key === 'ArrowDown') rightPaddle.dy = 0;
    });
  </script>
</body>
</html>
